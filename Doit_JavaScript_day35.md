## 브라우저와 관련된 객체

***
### navigator 객체

<br>

navigator 객체에는 웹 브라우저의 버전을 비롯해 플러그인 설치 정보나 온/오프라인 등의 여러 정보가 담겨 있다.

이 정보는 사용자가 수정할 수 없으며 가져와서 보여 줄 수만 있다.

<br>

### 웹 브라우저와 렌더링 엔진

웹 브라우저가 점점 다양해짐에 따라 모든 사용자의 웹 브라우저에서 똑같이 동작하는 웹 문서를 개발할 필요성이 생겼다.

여러 웹 브라우저를 고려하여 개발하는 것은 웹 개발자에게 가장 어려운 부분이기도 하다.

여러 웹 브라우저를 고려할 때 가장 먼저 생각해야 할 분야는 렌더링 엔진이다.

아직 표준화되지 않은 CSS 속성 앞에는 브라우저 벤더를 의미하는 프리픽스(prefix)를 지정한다.

이렇게 지정하는 이유는 웹 브라우저마다 HTML이나 CSS를 해석하는 렌더링 엔진(rendering engine)이 다르기 때문이다.

웹 브라우저는 웹 문서를 불러오면 내장된 렌더링 엔진에서 소스를 해석한다.

이때 웹 브라우저 마다 사용하는 렌더링 엔진이 다르므로 프리픽스를 붙여 브라우저를 구별하는 것이다.

렌더링 엔진은 레이아웃 엔진(layout engine)이라고도 한다.

<br>

마찬가지로 웹 브라우저마다 내장된 자바스크립트 엔진도 서로 다르다.

그래서 똑같은 HTML5 기술을 사용해서 만든 사이트에 접속하더라도 웹 브라우저마다 보여 주는 효과와 성능은 다를 수 있다.

크롬 브라우저의 주소 표시줄에 'chrome://version/'을 입력해 보면 현재 사용하는 렌더링 엔진과 버전을 알 수 있다.

각 브라우저에 포함된 렌더링 엔진과 자바스크립트 엔진은 다음과 같다.

|브라우저|렌더링 엔진|자바스크립트 엔진|
|-|-|-|
|크롬(Chrome)|블링크(Blink)|VB|
|파이어폭스(Firefox)|게코(Gecko)|스파이더몽키(SpiderMonkey)|
|인터넷 익스플로러(Internet Explorer)|트라이덴트(Trident)|차크라(Chakra)|
|사파리(Safari)|웹킷(Webkit)|자바스크립트코어(JavascriptCore)|
|오페라(Opera)|블링크(Blink)|VB|

블링크 엔진은 기존의 웹킷 엔진을 기반으로 한다.

<br>

### userAgent 프로퍼티 알아보기

navigator 객체에서 가장 먼저 알아야 할 프로퍼티는 userAgent로 사용자 에이전트 문자열을 의미한다.

userAgent는 사용자의 웹 브라우저 정보를 서버에 보낼 때 사용한다.

userAgent에는 사용자의 웹 브라우저 버전, 자바스크립트의 엔진 종류 등 여러 정보가 들어있다.

따라서 서버에서는 그 정보를 확인하여 사용자에게 맞는 웹 페이지를 보여 줄 수 있다.

우리가 주로 사용하는 크롬, 엣지, 파이어폭스 브라우저의 사용자 에이전트 문자열은 다음과 같다.

    크롬 userAgent
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebkit/537.36 (KHTML, like Gecko)
     Chrome/81.0.4044.138 Safari/537.36"

    엣지 userAgent
    "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebkit/537.36 (KHTML, like Gecko)
     Chrome/81.0.4044.138 Safari/537.36 Edg/81.0.416.72"

     파이어폭스 userAgent
     "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:76.0) Gecko/20100101 Firefox/76.0"


각 브라우저의 사용자 에이전트 문자열을 보면 Mozilla라는 예약어로 시작한다.

그 이유는 인터넷 초창기에 넷스케이프 내비게이터 웹 브라우저를 많이 사용했기 때문인데, 

이후에 나온 브라우저는 넷스케이프 사용자 에이전트 문자열과 호환하기 위해 넷스케이프 내비게이터에서 사용하는

Mozilla라는 키워드를 사용했다.

일부 브라우저는 다른 엔진을 사용하기도 한다.

예를 들어 인터넷 익스플로러 11의 경우 트라이덴트(Trident)라는 엔진을 사용하는데, 

다음과 같이 사용자 에이전트 문자열 중에 Trident가 포함되어 있다.

    Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; rv:11.0) like Gecko


파이어폭스 브라우저의 렌더링 엔진인 게코(Gecko)는 넷스케이프 브라우저의 엔진을 기반으로 한다.

다음은 파이어폭스 76.0버전의 사용자 에이전트 문자열이다.

    Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:76.0) Gecko/20100101 Firefox/76.0


크롬, 마이크로소프트 엣지, 사파리 브라우저는 모두 웹킷(Webkit) 엔진을 기반으로 한다.

웹킷 엔진은 다시 KHTML이라는 오픈소스 렌더링 엔진을 기반으로 한다.

그래서 사용자 에이전트 문자열에 KHTML이라는 내용이 포함되어있다.

그리고 like Gecko를 사용해서 기존 웹 브라우저와 호환된다고 알려준다.

크롬, 엣지, 사파리 브라우저의 사용자 에이전트 문자열은 다음과 같다.

    윈도우용 크롬 브라우저 81.0 버전
    Mozilla/5.0 (Windows NT 10.0; Wind64; x64;) AppleWebkit/537.36 (KTHML, like Gecko)
    Chrome/81.0.4044.138 Safari/537.36

    윈도우용 마이크로소프트 엣지 81.0 버전
    Mozilla/5.0 (Windows NT 10.0; Wind64; x64;) AppleWebkit/537.36 (KTHML, like Gecko)
    Chrome/81.0.4044.138 Safari/537.36 Edg/81.0.416.72

    맥용 사파리 브라우저 9.1 버전
    Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebkit/601.7.7 (KTHML, like Gecko)
    Version/9.1.2 Safari/601.7.7

사용자 에이전트 문자열에는 여러 가지 의미가 있는데, 이를 정리하면 다음과 같다.


|종류|설명|
|-|-|
|Mozilla/x.x|모질라 버전을 나타낸다.|
|Windows NT x.x|브라우저를 실행하는 컴퓨터 운영체제를 나타낸다.|
|Win64; x64|윈도우 64비트 기반을 나타낸다.|
|WOW64|윈도우 64비트 기반을 나타낸다.|
|Trident/x.x|트라이덴트 엔진 버전을 나타낸다.|
|rv: x.x|브라우저 버전을 나타낸다.|
|AppleWebkit/x.x|웹킷 엔진의 빌드 번호를 나타낸다.|
|KHTML|오픈소스 렌더링 엔진인 KHTML을 의미한다.|
|like Gecko|게코 기반의 다른 브라우저와 호환을 의미한다.|
|Firefox/x.x|파이어폭스 브라우저 버전을 나타낸다.|
|Chrome/x.x|크롬 버전을 나타낸다.|
|Safari/x.x|사파리 브라우저의 빌드 번호를 나타낸다.|

x는 문자열에 따라 다르게 사용하는 버전이나 빌드 번호를 의미한다.

예전에는 웹 브라우저를 식별할 때 사용자 에이전트 문자열을 많이 사용했다.

하지만 최근에는 같은 자바스크립트 엔진을 사용하는 브라우저가 많아서 사용자 에이전트 문자열의 내용이 겹치므로 사용하지 않는 추세이다.

<br>

### navigator 객체 정보 살펴보기

크롬 브라우저에서 Ctrl + Shift + J 를 눌러 콘솔 창을 열고 navigator를 입력한 후 Enter를 눌러보자.

그리고 navigator 왼쪽에 있는 재생버튼을 클릭하면 navigator 객체의 모든 정보를 한눈에 볼 수 있다.

사용할 수 있는 브라우저가 많아지고 웹 애플리케이션이 등장하면서 navigator 객체에는 진동 감지 속성이나 베터리 상태를 체크하는 속성 등이 새롭게 추가되고 있다.

다음 표는 navigator 객체의 주요 프로퍼티이다.

일부 브라우저에서만 지원하는 프로퍼티는 다루지 않았다.

|종류|설명|
|-|-|
|battery|배터리 충전 상태를 알려 준다.|
|cookieEnabled|쿠키 정보를 무시하면 false, 허용하면 true를 반환한다.|
|geolocation|모바일 기기를 이용한 위치 정보를 나타낸다.|
|language|브라우저 UI의 언어 정보를 나타낸다.|
|oscpu|현재 운영체제 정보를 나타낸다.|
|userAgent|현재 브라우저 정보를 담고 있는 사용자 에이전트 문자열이다.|

navigator 객체의 메서드는 대부분 일부 브라우저에서만 지원한다.

navigator의 전체 프로퍼티와 메서드 목록을 보려면 

developrt.mozilla.org/en-US/Web/API/Navigator 를 참고하자.

삼각 플라스크처럼 생긴 아이콘이 표시된 항목은 일부 브라우저에서만 지원한다는 뜻이다.
